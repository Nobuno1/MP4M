<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>音楽プレーヤー</title>
	
	<!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
		integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
	<style>
		#btn-play {
			width: 100px;
			height: 40px;
			padding: 10px;
			font-size: 18px;
		}

		#curtime {
			font-size: 30vw;
		}

		#input_img {
			height: 40px;

		}

		#seekbar {
			width: 100%;
			display: none;
		}

		#file {
			width: 1px;
			size: 1px;
			display: none;
		}

		#newseek {
			width: 100%;
		}

	</style>
</head>

<body>

	<h1>音楽プレーヤー</h1>
	<label><input id="file" type="file" accept=".opus, .flac, .webm, .weba, .wav, .ogg, .m4a, .mp3, .oga, .mid, .amr, .aiff, .wma, .au, .acc" multiple><img id="input_img"
			src="data:image/png;base64,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" /></label>
	<!-- 再生ボタン (最初は利用不可) -->
	<button id="btn-play" type="button" disabled hidden><img src="play32.png"></button>
	<span id="showfilename"></span>
	<!--<input id="seekbar" type="range" value="0" readonly>-->
	<progress id="seekbar" max="100" value="0"></progress>
	<input id="newseek" type="range" value="0">

	<div></div>
	<span id="curtime">--:--</span>/<span id="alltime">--:--</span>

	<!-- 必要なJSファイルを読み込む 
	<script src="howler.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.3/howler.min.js"></script>-->



	<script>
		const btn = document.querySelector("#btn-play");     // <button>
		const seekbar = document.querySelector("#seekbar");  // <input type="range">
		const curtime = document.querySelector("#curtime");  // <span>
		const alltime = document.querySelector("#alltime");  // <span>
		let duration = 0;   // 曲の長さ
		let timerid;        // setInterval()の戻り値

		const trueseek = document.getElementById("newseek");

		function moveseek() {
			try {
				bgm1.seek(trueseek.value * bgm1.duration() / 100);
				console.log("seeked");

			} catch (e) {
				console.log("cannnot seek");
			}
		}

		trueseek.addEventListener('input', moveseek, false);




		//--------------------------
		// インスタンスを生成
		//--------------------------
		/*
		const bgm1 = new Howl({
			src: [
				//'op.ogg',
				'光 ! ヒカキン & セイキン.mp3'  // Ogg非対応の場合にMP3を採用する
			]
		});
		
		*/

		/*

		var inputFile = document.getElementById('file');

		function fileChange(ev) {
			var target = ev.target;
			var files = target.files;

			console.log(files);
			console.log(files[0].name)
			console.log(target.value)
			whetherinput = true;

			const bgm1 = new Howl({
				src: [
					//'op.ogg',
					files[0].name  // Ogg非対応の場合にMP3を採用する
				]

			});

			





		}
*/
		var bgm1;

		var whetherinput = false;
		function fileChange(event) {
			// Read the file from the input
			//if (event.files.length > 0) {
			console.log(whetherinput);





			whetherinput = true;
			var target = event.target;
			var files = target.files
			console.log(target.files);
			console.log(files.length);
			if (files.length > 0) {
				if (whetherinput) {
					try {
						bgm1.stop();
						bgm1.unload();
						clearInterval(timerid);
						btn.innerHTML = '<i class="fas fa-play"></i>';
						curtime.innerHTML = "0:00"
						trueseek.value = 0;

					} catch (e) {
						console.log("Firsttime?")
					}
				}

				var file = files[0];
				console.log(file.name);
				var musicname = document.getElementById('showfilename')
				musicname.innerHTML = file.name;
				document.title = file.name;
				var reader = new FileReader();
				reader.addEventListener('load', function () {
					var data = reader.result;
					// Create a Howler sound
					bgm1 = new Howl({
						src: data,
						format: file.name.split('.').pop().toLowerCase() // always give file extension: this is optional but helps
					});
					console.log(bgm1);




					/**
					 * [event] 曲のロード完了時に実行
					 */
					bgm1.on("load", () => {
						// 曲の長さを表示
						//duration = bgm1.duration();
						alltime.innerHTML = getMMSS(bgm1.duration());

						// ボタンを使用可能にする
						btn.removeAttribute("disabled");
						btn.removeAttribute("hidden");
					});

					/**
					 * [event] 曲の再生開始時に実行
					 */
					bgm1.on("play", () => {
						duration = bgm1.duration();
						const len = duration;  //曲の長さを取得

						// タイマースタート
						timerid = setInterval(() => {
							let cur = bgm1.seek();
							var save = 0;
							// シークバーに現在の再生位置をセット

							var realseek = Math.ceil((cur / len) * 100);  // 百分率(0〜100)に直す
							//if (Math.abs(seekbar.value - realseek) > 2 && realseek - save > 2) {
							//	save = seekbar.value;
							//	setTimeout(function () { bgm1.seek(save * len / 100); }, 250);
							//}
							seekbar.value = realseek;

							// 現在の再生時間を更新
							curtime.innerHTML = getMMSS(cur);
							trueseek.value = realseek;
							//console.log(len);
						}
							, 200);  // 0.2秒ごとに実行
					});

					/**
					 * [event] 曲の一時停止時の実行
					 */
					bgm1.on("pause", () => {
						// タイマーを解除
						clearInterval(timerid);
					});

					/**
					 * [event] 曲の再生終了時に実行
					 */
					bgm1.on("end", () => {
						// タイマーを解除
						clearInterval(timerid);

						// 「再生ボタン」に変更
						btn.innerHTML = '<i class="fas fa-play"></i>';
					});
				}, false)

				//console.log(bgm1);
				reader.readAsDataURL(file);
			}




			/**
			 * 秒数をmm:ss形式で返却する
			 *
			 * @param {number} sec - 秒数
			 */
			function getMMSS(sec) {
				const mm = Math.floor(sec / 60);  // 分
				const ss = Math.floor(sec % 60);  // 秒

				return (
					mm + ":" + ("00" + ss).slice(-2)
				);
			}

		}


		/**
		 * [event] ボタンクリック時に実行
		 */
		inputFile = document.querySelector('#file');
		inputFile.addEventListener('change', fileChange, false);
		btn.addEventListener("click", pp);
		function pp() {
			console.log("PP");
			// true=>再生中, false=>停止
			if (bgm1.playing()) {
				btn.innerHTML = '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAwRJREFUWEfNVztv01AUPufGuJGrKAIpCeKhZGGJVJYIBGqDrDaK8mgFG6gjTPQXlAEqJspD9Acgxm4dGPBNMjFQKEuFRCXEwkCAweZVBiRAxAfdYEdpiONr1xV49bnnfvf7zhNB8isUCvvS6fRZAJhDxCwRHWCMTQBAx7btF4j4hYheE9GDZrPJJd0C+hiySqVyDBGvIuIsIib9HBMRAcBHIlqzLOvK5ubm11FnPAHouh7XNO0aACzIXDx4iQPEIqKVRqNx0wvEMAA4PT19aGxsrOFQ7Pdov/9Cog3LsmaHsTEIIFatVk8hohHm1V5IHDbeA0CNc77Vb9cPAMvl8hFFUbaivNy9zAHx1jTN4/1MuACipt2LjA4RPeWcn3ENugCcgFtCxEU/QXf7n4i+27Z9vdlsLgtfAgArl8t5RVHW94J6j+zoSYGFQkHLZDL3EHF+t68LcP4nANw3DGMBS6VSUlXVNzKvJ6JfAPAEEWMAMBXgwh2mTkC2Oec5rNVq84i4KuPM1a/dbt/NZrOXEPGGDPBhvonoW6fTOS8ArMrSPxBAqOt6Znx8XFTLyzIP6Lchoh8AsIL1ev2xLJ2DEew4jFUqlZOxWOyWrB9xzpGzJRgQnUx0Nd/PA0D3XD6fVwPK0q0JggHRvaS+UQAcB0Fl2Y4cwMzMTDoejy9JxsV2pBLkcrmLALAsmRkdANiIJAir1eoJxtjtsEEYOg0D0j1YjP6kYdhCFJDuv4K8V4iClmJEXAcAJQjdXg2Jc579981ItORSqXRUVVVRkHynXqmCMcJINCIiemdZ1oSYjP6LgaSLd3JyMpFMJkWrlSrLIZno5r5hGEX3/I6hdI+lsInopWmaU8OGUheQ6GynGWMPI44H27btV4h4YdRY3mNF1/XDmqbxiOQQXe+ZaZp1mcWkJ607KYumEoYNJ9o/iNXMnYCHxY3fcorFYvFgIpG4AwB1GSDOvPcJANZM01wMvZwOohXreSqVOscYmwOALADsdyQSFIt16zMRPbdt+1Gr1TJks+Q34qzLQszy6/QAAAAASUVORK5CYII=">';  // 「再生ボタン」に変更
				bgm1.pause();
			}
			else {
				btn.innerHTML = '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAqxJREFUWEfNl01rE1EUht9zOyYyEIJCEvGDuHEj1E02SowOIYRJ0qI7of/A/oK6UHGnIPQHSJfddeHCuZmsVKzWTRDs2oVWhRm/F4JKM0dunYQ0JJlJMjGdXTJ37nnue849H4SQTy6XO5ROp68AWCSiLDMfFULMA2h5nveaiL4x8xtmfmjbtgy5LShgoTBN8wwR3SSiBSJKBm3MzAzgMzNvuK57o9ls/hj2zUAAwzAO67p+C8ByGMO9RnwQl5lX6/X6vUEQ/QCoWCwej8fjdV/ioEMHvVcu2nJdd6GfGr0Ac5VK5TwRWeOcehCJr8YHAFUp5Xb3um4AKpfLJzVN247SeNuYD7HjOM65biXaAFHLPkiMFjO/kFJeai/YA/AD7jYRrQQ5dNL3zPzL87w7tm3fVXspAFEul89qmrY5DekH3I6OKyiXy+mZTOYBES1NeroRvv8DYM2yrGUqlUrJWCz29n+cvicg30kpT1O1Wl0iovUgembeZeanRLQ55LppQojLAC6G2O9nq9W6pgDWw8jfGzz9DIwSzMz8G8Aq1Wq1ZyGJ90VvBAC7ABpKAVXJVFUb+kStgKqiKicoBVT1CnymAKBsfp89wCxdAGDrQAThbK/hKIkIwBMAAxMRAI2IjJDX+l8immEq3pFSZmdfjFRJLpVKp2KxmEpIgV1vYMIITmiqOXrvuu686owOREOyx5zP5xPJZPJ5mLQ8gQotdfctyyrsa8n8H1N1hdK9W/p+AOq/OdM0LwghHkUZD35H/BFAZVhb3oEyDOOErusyIneoqvfScZxamMGk4952cwHg+jhq+JJ/UqNZuwPuFztBwykVCoVjiUTiPoBaGBBf7i8ANhzHWRl7OO2lVeN5KpW6KoRYBJAFcMR3kZJYjVtfmfmV53mPG42GFfam/AUzC75CR78rggAAAABJRU5ErkJggg==">';  // 「停止ボタン」に変更
				bgm1.play();
			}
		}

		window.addEventListener("keypress", function (e) {
			console.log("Key press:" + e.key);
			if (e.code == 'Enter' || e.code == ' ') {
				pp();
			}
		});




	</script>
	<script>/*! howler.js v2.1.3 | (c) 2013-2019, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
		!function () { "use strict"; var e = function () { this.init() }; e.prototype = { init: function () { var e = this || n; return e._counter = 1e3, e._html5AudioPool = [], e.html5PoolSize = 10, e._codecs = {}, e._howls = [], e._muted = !1, e._volume = 1, e._canPlayEvent = "canplaythrough", e._navigator = "undefined" != typeof window && window.navigator ? window.navigator : null, e.masterGain = null, e.noAudio = !1, e.usingWebAudio = !0, e.autoSuspend = !0, e.ctx = null, e.autoUnlock = !0, e._setup(), e }, volume: function (e) { var o = this || n; if (e = parseFloat(e), o.ctx || _(), void 0 !== e && e >= 0 && e <= 1) { if (o._volume = e, o._muted) return o; o.usingWebAudio && o.masterGain.gain.setValueAtTime(e, n.ctx.currentTime); for (var t = 0; t < o._howls.length; t++)if (!o._howls[t]._webAudio) for (var r = o._howls[t]._getSoundIds(), a = 0; a < r.length; a++) { var u = o._howls[t]._soundById(r[a]); u && u._node && (u._node.volume = u._volume * e) } return o } return o._volume }, mute: function (e) { var o = this || n; o.ctx || _(), o._muted = e, o.usingWebAudio && o.masterGain.gain.setValueAtTime(e ? 0 : o._volume, n.ctx.currentTime); for (var t = 0; t < o._howls.length; t++)if (!o._howls[t]._webAudio) for (var r = o._howls[t]._getSoundIds(), a = 0; a < r.length; a++) { var u = o._howls[t]._soundById(r[a]); u && u._node && (u._node.muted = !!e || u._muted) } return o }, unload: function () { for (var e = this || n, o = e._howls.length - 1; o >= 0; o--)e._howls[o].unload(); return e.usingWebAudio && e.ctx && void 0 !== e.ctx.close && (e.ctx.close(), e.ctx = null, _()), e }, codecs: function (e) { return (this || n)._codecs[e.replace(/^x-/, "")] }, _setup: function () { var e = this || n; if (e.state = e.ctx ? e.ctx.state || "suspended" : "suspended", e._autoSuspend(), !e.usingWebAudio) if ("undefined" != typeof Audio) try { var o = new Audio; void 0 === o.oncanplaythrough && (e._canPlayEvent = "canplay") } catch (n) { e.noAudio = !0 } else e.noAudio = !0; try { var o = new Audio; o.muted && (e.noAudio = !0) } catch (e) { } return e.noAudio || e._setupCodecs(), e }, _setupCodecs: function () { var e = this || n, o = null; try { o = "undefined" != typeof Audio ? new Audio : null } catch (n) { return e } if (!o || "function" != typeof o.canPlayType) return e; var t = o.canPlayType("audio/mpeg;").replace(/^no$/, ""), r = e._navigator && e._navigator.userAgent.match(/OPR\/([0-6].)/g), a = r && parseInt(r[0].split("/")[1], 10) < 33; return e._codecs = { mp3: !(a || !t && !o.canPlayType("audio/mp3;").replace(/^no$/, "")), mpeg: !!t, opus: !!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""), ogg: !!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), oga: !!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), wav: !!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), aac: !!o.canPlayType("audio/aac;").replace(/^no$/, ""), caf: !!o.canPlayType("audio/x-caf;").replace(/^no$/, ""), m4a: !!(o.canPlayType("audio/x-m4a;") || o.canPlayType("audio/m4a;") || o.canPlayType("audio/aac;")).replace(/^no$/, ""), mp4: !!(o.canPlayType("audio/x-mp4;") || o.canPlayType("audio/mp4;") || o.canPlayType("audio/aac;")).replace(/^no$/, ""), weba: !!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""), webm: !!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""), dolby: !!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""), flac: !!(o.canPlayType("audio/x-flac;") || o.canPlayType("audio/flac;")).replace(/^no$/, "") }, e }, _unlockAudio: function () { var e = this || n; if (!e._audioUnlocked && e.ctx) { e._audioUnlocked = !1, e.autoUnlock = !1, e._mobileUnloaded || 44100 === e.ctx.sampleRate || (e._mobileUnloaded = !0, e.unload()), e._scratchBuffer = e.ctx.createBuffer(1, 1, 22050); var o = function (n) { for (var t = 0; t < e.html5PoolSize; t++)try { var r = new Audio; r._unlocked = !0, e._releaseHtml5Audio(r) } catch (n) { e.noAudio = !0 } for (var t = 0; t < e._howls.length; t++)if (!e._howls[t]._webAudio) for (var a = e._howls[t]._getSoundIds(), u = 0; u < a.length; u++) { var i = e._howls[t]._soundById(a[u]); i && i._node && !i._node._unlocked && (i._node._unlocked = !0, i._node.load()) } e._autoResume(); var d = e.ctx.createBufferSource(); d.buffer = e._scratchBuffer, d.connect(e.ctx.destination), void 0 === d.start ? d.noteOn(0) : d.start(0), "function" == typeof e.ctx.resume && e.ctx.resume(), d.onended = function () { d.disconnect(0), e._audioUnlocked = !0, document.removeEventListener("touchstart", o, !0), document.removeEventListener("touchend", o, !0), document.removeEventListener("click", o, !0); for (var n = 0; n < e._howls.length; n++)e._howls[n]._emit("unlock") } }; return document.addEventListener("touchstart", o, !0), document.addEventListener("touchend", o, !0), document.addEventListener("click", o, !0), e } }, _obtainHtml5Audio: function () { var e = this || n; if (e._html5AudioPool.length) return e._html5AudioPool.pop(); var o = (new Audio).play(); return o && "undefined" != typeof Promise && (o instanceof Promise || "function" == typeof o.then) && o.catch(function () { console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.") }), new Audio }, _releaseHtml5Audio: function (e) { var o = this || n; return e._unlocked && o._html5AudioPool.push(e), o }, _autoSuspend: function () { var e = this; if (e.autoSuspend && e.ctx && void 0 !== e.ctx.suspend && n.usingWebAudio) { for (var o = 0; o < e._howls.length; o++)if (e._howls[o]._webAudio) for (var t = 0; t < e._howls[o]._sounds.length; t++)if (!e._howls[o]._sounds[t]._paused) return e; return e._suspendTimer && clearTimeout(e._suspendTimer), e._suspendTimer = setTimeout(function () { e.autoSuspend && (e._suspendTimer = null, e.state = "suspending", e.ctx.suspend().then(function () { e.state = "suspended", e._resumeAfterSuspend && (delete e._resumeAfterSuspend, e._autoResume()) })) }, 3e4), e } }, _autoResume: function () { var e = this; if (e.ctx && void 0 !== e.ctx.resume && n.usingWebAudio) return "running" === e.state && e._suspendTimer ? (clearTimeout(e._suspendTimer), e._suspendTimer = null) : "suspended" === e.state ? (e.ctx.resume().then(function () { e.state = "running"; for (var n = 0; n < e._howls.length; n++)e._howls[n]._emit("resume") }), e._suspendTimer && (clearTimeout(e._suspendTimer), e._suspendTimer = null)) : "suspending" === e.state && (e._resumeAfterSuspend = !0), e } }; var n = new e, o = function (e) { var n = this; if (!e.src || 0 === e.src.length) return void console.error("An array of source files must be passed with any new Howl."); n.init(e) }; o.prototype = { init: function (e) { var o = this; return n.ctx || _(), o._autoplay = e.autoplay || !1, o._format = "string" != typeof e.format ? e.format : [e.format], o._html5 = e.html5 || !1, o._muted = e.mute || !1, o._loop = e.loop || !1, o._pool = e.pool || 5, o._preload = "boolean" != typeof e.preload || e.preload, o._rate = e.rate || 1, o._sprite = e.sprite || {}, o._src = "string" != typeof e.src ? e.src : [e.src], o._volume = void 0 !== e.volume ? e.volume : 1, o._xhrWithCredentials = e.xhrWithCredentials || !1, o._duration = 0, o._state = "unloaded", o._sounds = [], o._endTimers = {}, o._queue = [], o._playLock = !1, o._onend = e.onend ? [{ fn: e.onend }] : [], o._onfade = e.onfade ? [{ fn: e.onfade }] : [], o._onload = e.onload ? [{ fn: e.onload }] : [], o._onloaderror = e.onloaderror ? [{ fn: e.onloaderror }] : [], o._onplayerror = e.onplayerror ? [{ fn: e.onplayerror }] : [], o._onpause = e.onpause ? [{ fn: e.onpause }] : [], o._onplay = e.onplay ? [{ fn: e.onplay }] : [], o._onstop = e.onstop ? [{ fn: e.onstop }] : [], o._onmute = e.onmute ? [{ fn: e.onmute }] : [], o._onvolume = e.onvolume ? [{ fn: e.onvolume }] : [], o._onrate = e.onrate ? [{ fn: e.onrate }] : [], o._onseek = e.onseek ? [{ fn: e.onseek }] : [], o._onunlock = e.onunlock ? [{ fn: e.onunlock }] : [], o._onresume = [], o._webAudio = n.usingWebAudio && !o._html5, void 0 !== n.ctx && n.ctx && n.autoUnlock && n._unlockAudio(), n._howls.push(o), o._autoplay && o._queue.push({ event: "play", action: function () { o.play() } }), o._preload && o.load(), o }, load: function () { var e = this, o = null; if (n.noAudio) return void e._emit("loaderror", null, "No audio support."); "string" == typeof e._src && (e._src = [e._src]); for (var r = 0; r < e._src.length; r++) { var u, i; if (e._format && e._format[r]) u = e._format[r]; else { if ("string" != typeof (i = e._src[r])) { e._emit("loaderror", null, "Non-string found in selected audio sources - ignoring."); continue } u = /^data:audio\/([^;,]+);/i.exec(i), u || (u = /\.([^.]+)$/.exec(i.split("?", 1)[0])), u && (u = u[1].toLowerCase()) } if (u || console.warn('No file extension was found. Consider using the "format" property or specify an extension.'), u && n.codecs(u)) { o = e._src[r]; break } } return o ? (e._src = o, e._state = "loading", "https:" === window.location.protocol && "http:" === o.slice(0, 5) && (e._html5 = !0, e._webAudio = !1), new t(e), e._webAudio && a(e), e) : void e._emit("loaderror", null, "No codec support for selected audio sources.") }, play: function (e, o) { var t = this, r = null; if ("number" == typeof e) r = e, e = null; else { if ("string" == typeof e && "loaded" === t._state && !t._sprite[e]) return null; if (void 0 === e && (e = "__default", !t._playLock)) { for (var a = 0, u = 0; u < t._sounds.length; u++)t._sounds[u]._paused && !t._sounds[u]._ended && (a++, r = t._sounds[u]._id); 1 === a ? e = null : r = null } } var i = r ? t._soundById(r) : t._inactiveSound(); if (!i) return null; if (r && !e && (e = i._sprite || "__default"), "loaded" !== t._state) { i._sprite = e, i._ended = !1; var d = i._id; return t._queue.push({ event: "play", action: function () { t.play(d) } }), d } if (r && !i._paused) return o || t._loadQueue("play"), i._id; t._webAudio && n._autoResume(); var _ = Math.max(0, i._seek > 0 ? i._seek : t._sprite[e][0] / 1e3), s = Math.max(0, (t._sprite[e][0] + t._sprite[e][1]) / 1e3 - _), l = 1e3 * s / Math.abs(i._rate), c = t._sprite[e][0] / 1e3, f = (t._sprite[e][0] + t._sprite[e][1]) / 1e3; i._sprite = e, i._ended = !1; var p = function () { i._paused = !1, i._seek = _, i._start = c, i._stop = f, i._loop = !(!i._loop && !t._sprite[e][2]) }; if (_ >= f) return void t._ended(i); var m = i._node; if (t._webAudio) { var v = function () { t._playLock = !1, p(), t._refreshBuffer(i); var e = i._muted || t._muted ? 0 : i._volume; m.gain.setValueAtTime(e, n.ctx.currentTime), i._playStart = n.ctx.currentTime, void 0 === m.bufferSource.start ? i._loop ? m.bufferSource.noteGrainOn(0, _, 86400) : m.bufferSource.noteGrainOn(0, _, s) : i._loop ? m.bufferSource.start(0, _, 86400) : m.bufferSource.start(0, _, s), l !== 1 / 0 && (t._endTimers[i._id] = setTimeout(t._ended.bind(t, i), l)), o || setTimeout(function () { t._emit("play", i._id), t._loadQueue() }, 0) }; "running" === n.state ? v() : (t._playLock = !0, t.once("resume", v), t._clearTimer(i._id)) } else { var h = function () { m.currentTime = _, m.muted = i._muted || t._muted || n._muted || m.muted, m.volume = i._volume * n.volume(), m.playbackRate = i._rate; try { var r = m.play(); if (r && "undefined" != typeof Promise && (r instanceof Promise || "function" == typeof r.then) ? (t._playLock = !0, p(), r.then(function () { t._playLock = !1, m._unlocked = !0, o || (t._emit("play", i._id), t._loadQueue()) }).catch(function () { t._playLock = !1, t._emit("playerror", i._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."), i._ended = !0, i._paused = !0 })) : o || (t._playLock = !1, p(), t._emit("play", i._id), t._loadQueue()), m.playbackRate = i._rate, m.paused) return void t._emit("playerror", i._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."); "__default" !== e || i._loop ? t._endTimers[i._id] = setTimeout(t._ended.bind(t, i), l) : (t._endTimers[i._id] = function () { t._ended(i), m.removeEventListener("ended", t._endTimers[i._id], !1) }, m.addEventListener("ended", t._endTimers[i._id], !1)) } catch (e) { t._emit("playerror", i._id, e) } }; "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA" === m.src && (m.src = t._src, m.load()); var y = window && window.ejecta || !m.readyState && n._navigator.isCocoonJS; if (m.readyState >= 3 || y) h(); else { t._playLock = !0; var g = function () { h(), m.removeEventListener(n._canPlayEvent, g, !1) }; m.addEventListener(n._canPlayEvent, g, !1), t._clearTimer(i._id) } } return i._id }, pause: function (e) { var n = this; if ("loaded" !== n._state || n._playLock) return n._queue.push({ event: "pause", action: function () { n.pause(e) } }), n; for (var o = n._getSoundIds(e), t = 0; t < o.length; t++) { n._clearTimer(o[t]); var r = n._soundById(o[t]); if (r && !r._paused && (r._seek = n.seek(o[t]), r._rateSeek = 0, r._paused = !0, n._stopFade(o[t]), r._node)) if (n._webAudio) { if (!r._node.bufferSource) continue; void 0 === r._node.bufferSource.stop ? r._node.bufferSource.noteOff(0) : r._node.bufferSource.stop(0), n._cleanBuffer(r._node) } else isNaN(r._node.duration) && r._node.duration !== 1 / 0 || r._node.pause(); arguments[1] || n._emit("pause", r ? r._id : null) } return n }, stop: function (e, n) { var o = this; if ("loaded" !== o._state || o._playLock) return o._queue.push({ event: "stop", action: function () { o.stop(e) } }), o; for (var t = o._getSoundIds(e), r = 0; r < t.length; r++) { o._clearTimer(t[r]); var a = o._soundById(t[r]); a && (a._seek = a._start || 0, a._rateSeek = 0, a._paused = !0, a._ended = !0, o._stopFade(t[r]), a._node && (o._webAudio ? a._node.bufferSource && (void 0 === a._node.bufferSource.stop ? a._node.bufferSource.noteOff(0) : a._node.bufferSource.stop(0), o._cleanBuffer(a._node)) : isNaN(a._node.duration) && a._node.duration !== 1 / 0 || (a._node.currentTime = a._start || 0, a._node.pause(), a._node.duration === 1 / 0 && o._clearSound(a._node))), n || o._emit("stop", a._id)) } return o }, mute: function (e, o) { var t = this; if ("loaded" !== t._state || t._playLock) return t._queue.push({ event: "mute", action: function () { t.mute(e, o) } }), t; if (void 0 === o) { if ("boolean" != typeof e) return t._muted; t._muted = e } for (var r = t._getSoundIds(o), a = 0; a < r.length; a++) { var u = t._soundById(r[a]); u && (u._muted = e, u._interval && t._stopFade(u._id), t._webAudio && u._node ? u._node.gain.setValueAtTime(e ? 0 : u._volume, n.ctx.currentTime) : u._node && (u._node.muted = !!n._muted || e), t._emit("mute", u._id)) } return t }, volume: function () { var e, o, t = this, r = arguments; if (0 === r.length) return t._volume; if (1 === r.length || 2 === r.length && void 0 === r[1]) { t._getSoundIds().indexOf(r[0]) >= 0 ? o = parseInt(r[0], 10) : e = parseFloat(r[0]) } else r.length >= 2 && (e = parseFloat(r[0]), o = parseInt(r[1], 10)); var a; if (!(void 0 !== e && e >= 0 && e <= 1)) return a = o ? t._soundById(o) : t._sounds[0], a ? a._volume : 0; if ("loaded" !== t._state || t._playLock) return t._queue.push({ event: "volume", action: function () { t.volume.apply(t, r) } }), t; void 0 === o && (t._volume = e), o = t._getSoundIds(o); for (var u = 0; u < o.length; u++)(a = t._soundById(o[u])) && (a._volume = e, r[2] || t._stopFade(o[u]), t._webAudio && a._node && !a._muted ? a._node.gain.setValueAtTime(e, n.ctx.currentTime) : a._node && !a._muted && (a._node.volume = e * n.volume()), t._emit("volume", a._id)); return t }, fade: function (e, o, t, r) { var a = this; if ("loaded" !== a._state || a._playLock) return a._queue.push({ event: "fade", action: function () { a.fade(e, o, t, r) } }), a; e = parseFloat(e), o = parseFloat(o), t = parseFloat(t), a.volume(e, r); for (var u = a._getSoundIds(r), i = 0; i < u.length; i++) { var d = a._soundById(u[i]); if (d) { if (r || a._stopFade(u[i]), a._webAudio && !d._muted) { var _ = n.ctx.currentTime, s = _ + t / 1e3; d._volume = e, d._node.gain.setValueAtTime(e, _), d._node.gain.linearRampToValueAtTime(o, s) } a._startFadeInterval(d, e, o, t, u[i], void 0 === r) } } return a }, _startFadeInterval: function (e, n, o, t, r, a) { var u = this, i = n, d = o - n, _ = Math.abs(d / .01), s = Math.max(4, _ > 0 ? t / _ : t), l = Date.now(); e._fadeTo = o, e._interval = setInterval(function () { var r = (Date.now() - l) / t; l = Date.now(), i += d * r, i = Math.max(0, i), i = Math.min(1, i), i = Math.round(100 * i) / 100, u._webAudio ? e._volume = i : u.volume(i, e._id, !0), a && (u._volume = i), (o < n && i <= o || o > n && i >= o) && (clearInterval(e._interval), e._interval = null, e._fadeTo = null, u.volume(o, e._id), u._emit("fade", e._id)) }, s) }, _stopFade: function (e) { var o = this, t = o._soundById(e); return t && t._interval && (o._webAudio && t._node.gain.cancelScheduledValues(n.ctx.currentTime), clearInterval(t._interval), t._interval = null, o.volume(t._fadeTo, e), t._fadeTo = null, o._emit("fade", e)), o }, loop: function () { var e, n, o, t = this, r = arguments; if (0 === r.length) return t._loop; if (1 === r.length) { if ("boolean" != typeof r[0]) return !!(o = t._soundById(parseInt(r[0], 10))) && o._loop; e = r[0], t._loop = e } else 2 === r.length && (e = r[0], n = parseInt(r[1], 10)); for (var a = t._getSoundIds(n), u = 0; u < a.length; u++)(o = t._soundById(a[u])) && (o._loop = e, t._webAudio && o._node && o._node.bufferSource && (o._node.bufferSource.loop = e, e && (o._node.bufferSource.loopStart = o._start || 0, o._node.bufferSource.loopEnd = o._stop))); return t }, rate: function () { var e, o, t = this, r = arguments; if (0 === r.length) o = t._sounds[0]._id; else if (1 === r.length) { var a = t._getSoundIds(), u = a.indexOf(r[0]); u >= 0 ? o = parseInt(r[0], 10) : e = parseFloat(r[0]) } else 2 === r.length && (e = parseFloat(r[0]), o = parseInt(r[1], 10)); var i; if ("number" != typeof e) return i = t._soundById(o), i ? i._rate : t._rate; if ("loaded" !== t._state || t._playLock) return t._queue.push({ event: "rate", action: function () { t.rate.apply(t, r) } }), t; void 0 === o && (t._rate = e), o = t._getSoundIds(o); for (var d = 0; d < o.length; d++)if (i = t._soundById(o[d])) { t.playing(o[d]) && (i._rateSeek = t.seek(o[d]), i._playStart = t._webAudio ? n.ctx.currentTime : i._playStart), i._rate = e, t._webAudio && i._node && i._node.bufferSource ? i._node.bufferSource.playbackRate.setValueAtTime(e, n.ctx.currentTime) : i._node && (i._node.playbackRate = e); var _ = t.seek(o[d]), s = (t._sprite[i._sprite][0] + t._sprite[i._sprite][1]) / 1e3 - _, l = 1e3 * s / Math.abs(i._rate); !t._endTimers[o[d]] && i._paused || (t._clearTimer(o[d]), t._endTimers[o[d]] = setTimeout(t._ended.bind(t, i), l)), t._emit("rate", i._id) } return t }, seek: function () { var e, o, t = this, r = arguments; if (0 === r.length) o = t._sounds[0]._id; else if (1 === r.length) { var a = t._getSoundIds(), u = a.indexOf(r[0]); u >= 0 ? o = parseInt(r[0], 10) : t._sounds.length && (o = t._sounds[0]._id, e = parseFloat(r[0])) } else 2 === r.length && (e = parseFloat(r[0]), o = parseInt(r[1], 10)); if (void 0 === o) return t; if ("loaded" !== t._state || t._playLock) return t._queue.push({ event: "seek", action: function () { t.seek.apply(t, r) } }), t; var i = t._soundById(o); if (i) { if (!("number" == typeof e && e >= 0)) { if (t._webAudio) { var d = t.playing(o) ? n.ctx.currentTime - i._playStart : 0, _ = i._rateSeek ? i._rateSeek - i._seek : 0; return i._seek + (_ + d * Math.abs(i._rate)) } return i._node.currentTime } var s = t.playing(o); s && t.pause(o, !0), i._seek = e, i._ended = !1, t._clearTimer(o), t._webAudio || !i._node || isNaN(i._node.duration) || (i._node.currentTime = e); var l = function () { t._emit("seek", o), s && t.play(o, !0) }; if (s && !t._webAudio) { var c = function () { t._playLock ? setTimeout(c, 0) : l() }; setTimeout(c, 0) } else l() } return t }, playing: function (e) { var n = this; if ("number" == typeof e) { var o = n._soundById(e); return !!o && !o._paused } for (var t = 0; t < n._sounds.length; t++)if (!n._sounds[t]._paused) return !0; return !1 }, duration: function (e) { var n = this, o = n._duration, t = n._soundById(e); return t && (o = n._sprite[t._sprite][1] / 1e3), o }, state: function () { return this._state }, unload: function () { for (var e = this, o = e._sounds, t = 0; t < o.length; t++)o[t]._paused || e.stop(o[t]._id), e._webAudio || (e._clearSound(o[t]._node), o[t]._node.removeEventListener("error", o[t]._errorFn, !1), o[t]._node.removeEventListener(n._canPlayEvent, o[t]._loadFn, !1), n._releaseHtml5Audio(o[t]._node)), delete o[t]._node, e._clearTimer(o[t]._id); var a = n._howls.indexOf(e); a >= 0 && n._howls.splice(a, 1); var u = !0; for (t = 0; t < n._howls.length; t++)if (n._howls[t]._src === e._src || e._src.indexOf(n._howls[t]._src) >= 0) { u = !1; break } return r && u && delete r[e._src], n.noAudio = !1, e._state = "unloaded", e._sounds = [], e = null, null }, on: function (e, n, o, t) { var r = this, a = r["_on" + e]; return "function" == typeof n && a.push(t ? { id: o, fn: n, once: t } : { id: o, fn: n }), r }, off: function (e, n, o) { var t = this, r = t["_on" + e], a = 0; if ("number" == typeof n && (o = n, n = null), n || o) for (a = 0; a < r.length; a++) { var u = o === r[a].id; if (n === r[a].fn && u || !n && u) { r.splice(a, 1); break } } else if (e) t["_on" + e] = []; else { var i = Object.keys(t); for (a = 0; a < i.length; a++)0 === i[a].indexOf("_on") && Array.isArray(t[i[a]]) && (t[i[a]] = []) } return t }, once: function (e, n, o) { var t = this; return t.on(e, n, o, 1), t }, _emit: function (e, n, o) { for (var t = this, r = t["_on" + e], a = r.length - 1; a >= 0; a--)r[a].id && r[a].id !== n && "load" !== e || (setTimeout(function (e) { e.call(this, n, o) }.bind(t, r[a].fn), 0), r[a].once && t.off(e, r[a].fn, r[a].id)); return t._loadQueue(e), t }, _loadQueue: function (e) { var n = this; if (n._queue.length > 0) { var o = n._queue[0]; o.event === e && (n._queue.shift(), n._loadQueue()), e || o.action() } return n }, _ended: function (e) { var o = this, t = e._sprite; if (!o._webAudio && e._node && !e._node.paused && !e._node.ended && e._node.currentTime < e._stop) return setTimeout(o._ended.bind(o, e), 100), o; var r = !(!e._loop && !o._sprite[t][2]); if (o._emit("end", e._id), !o._webAudio && r && o.stop(e._id, !0).play(e._id), o._webAudio && r) { o._emit("play", e._id), e._seek = e._start || 0, e._rateSeek = 0, e._playStart = n.ctx.currentTime; var a = 1e3 * (e._stop - e._start) / Math.abs(e._rate); o._endTimers[e._id] = setTimeout(o._ended.bind(o, e), a) } return o._webAudio && !r && (e._paused = !0, e._ended = !0, e._seek = e._start || 0, e._rateSeek = 0, o._clearTimer(e._id), o._cleanBuffer(e._node), n._autoSuspend()), o._webAudio || r || o.stop(e._id, !0), o }, _clearTimer: function (e) { var n = this; if (n._endTimers[e]) { if ("function" != typeof n._endTimers[e]) clearTimeout(n._endTimers[e]); else { var o = n._soundById(e); o && o._node && o._node.removeEventListener("ended", n._endTimers[e], !1) } delete n._endTimers[e] } return n }, _soundById: function (e) { for (var n = this, o = 0; o < n._sounds.length; o++)if (e === n._sounds[o]._id) return n._sounds[o]; return null }, _inactiveSound: function () { var e = this; e._drain(); for (var n = 0; n < e._sounds.length; n++)if (e._sounds[n]._ended) return e._sounds[n].reset(); return new t(e) }, _drain: function () { var e = this, n = e._pool, o = 0, t = 0; if (!(e._sounds.length < n)) { for (t = 0; t < e._sounds.length; t++)e._sounds[t]._ended && o++; for (t = e._sounds.length - 1; t >= 0; t--) { if (o <= n) return; e._sounds[t]._ended && (e._webAudio && e._sounds[t]._node && e._sounds[t]._node.disconnect(0), e._sounds.splice(t, 1), o--) } } }, _getSoundIds: function (e) { var n = this; if (void 0 === e) { for (var o = [], t = 0; t < n._sounds.length; t++)o.push(n._sounds[t]._id); return o } return [e] }, _refreshBuffer: function (e) { var o = this; return e._node.bufferSource = n.ctx.createBufferSource(), e._node.bufferSource.buffer = r[o._src], e._panner ? e._node.bufferSource.connect(e._panner) : e._node.bufferSource.connect(e._node), e._node.bufferSource.loop = e._loop, e._loop && (e._node.bufferSource.loopStart = e._start || 0, e._node.bufferSource.loopEnd = e._stop || 0), e._node.bufferSource.playbackRate.setValueAtTime(e._rate, n.ctx.currentTime), o }, _cleanBuffer: function (e) { var o = this, t = n._navigator && n._navigator.vendor.indexOf("Apple") >= 0; if (n._scratchBuffer && e.bufferSource && (e.bufferSource.onended = null, e.bufferSource.disconnect(0), t)) try { e.bufferSource.buffer = n._scratchBuffer } catch (e) { } return e.bufferSource = null, o }, _clearSound: function (e) { /MSIE |Trident\//.test(n._navigator && n._navigator.userAgent) || (e.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") } }; var t = function (e) { this._parent = e, this.init() }; t.prototype = { init: function () { var e = this, o = e._parent; return e._muted = o._muted, e._loop = o._loop, e._volume = o._volume, e._rate = o._rate, e._seek = 0, e._paused = !0, e._ended = !0, e._sprite = "__default", e._id = ++n._counter, o._sounds.push(e), e.create(), e }, create: function () { var e = this, o = e._parent, t = n._muted || e._muted || e._parent._muted ? 0 : e._volume; return o._webAudio ? (e._node = void 0 === n.ctx.createGain ? n.ctx.createGainNode() : n.ctx.createGain(), e._node.gain.setValueAtTime(t, n.ctx.currentTime), e._node.paused = !0, e._node.connect(n.masterGain)) : n.noAudio || (e._node = n._obtainHtml5Audio(), e._errorFn = e._errorListener.bind(e), e._node.addEventListener("error", e._errorFn, !1), e._loadFn = e._loadListener.bind(e), e._node.addEventListener(n._canPlayEvent, e._loadFn, !1), e._node.src = o._src, e._node.preload = "auto", e._node.volume = t * n.volume(), e._node.load()), e }, reset: function () { var e = this, o = e._parent; return e._muted = o._muted, e._loop = o._loop, e._volume = o._volume, e._rate = o._rate, e._seek = 0, e._rateSeek = 0, e._paused = !0, e._ended = !0, e._sprite = "__default", e._id = ++n._counter, e }, _errorListener: function () { var e = this; e._parent._emit("loaderror", e._id, e._node.error ? e._node.error.code : 0), e._node.removeEventListener("error", e._errorFn, !1) }, _loadListener: function () { var e = this, o = e._parent; o._duration = Math.ceil(10 * e._node.duration) / 10, 0 === Object.keys(o._sprite).length && (o._sprite = { __default: [0, 1e3 * o._duration] }), "loaded" !== o._state && (o._state = "loaded", o._emit("load"), o._loadQueue()), e._node.removeEventListener(n._canPlayEvent, e._loadFn, !1) } }; var r = {}, a = function (e) { var n = e._src; if (r[n]) return e._duration = r[n].duration, void d(e); if (/^data:[^;]+;base64,/.test(n)) { for (var o = atob(n.split(",")[1]), t = new Uint8Array(o.length), a = 0; a < o.length; ++a)t[a] = o.charCodeAt(a); i(t.buffer, e) } else { var _ = new XMLHttpRequest; _.open("GET", n, !0), _.withCredentials = e._xhrWithCredentials, _.responseType = "arraybuffer", _.onload = function () { var n = (_.status + "")[0]; if ("0" !== n && "2" !== n && "3" !== n) return void e._emit("loaderror", null, "Failed loading audio file with status: " + _.status + "."); i(_.response, e) }, _.onerror = function () { e._webAudio && (e._html5 = !0, e._webAudio = !1, e._sounds = [], delete r[n], e.load()) }, u(_) } }, u = function (e) { try { e.send() } catch (n) { e.onerror() } }, i = function (e, o) { var t = function () { o._emit("loaderror", null, "Decoding audio data failed.") }, a = function (e) { e && o._sounds.length > 0 ? (r[o._src] = e, d(o, e)) : t() }; "undefined" != typeof Promise && 1 === n.ctx.decodeAudioData.length ? n.ctx.decodeAudioData(e).then(a).catch(t) : n.ctx.decodeAudioData(e, a, t) }, d = function (e, n) { n && !e._duration && (e._duration = n.duration), 0 === Object.keys(e._sprite).length && (e._sprite = { __default: [0, 1e3 * e._duration] }), "loaded" !== e._state && (e._state = "loaded", e._emit("load"), e._loadQueue()) }, _ = function () { if (n.usingWebAudio) { try { "undefined" != typeof AudioContext ? n.ctx = new AudioContext : "undefined" != typeof webkitAudioContext ? n.ctx = new webkitAudioContext : n.usingWebAudio = !1 } catch (e) { n.usingWebAudio = !1 } n.ctx || (n.usingWebAudio = !1); var e = /iP(hone|od|ad)/.test(n._navigator && n._navigator.platform), o = n._navigator && n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/), t = o ? parseInt(o[1], 10) : null; if (e && t && t < 9) { var r = /safari/.test(n._navigator && n._navigator.userAgent.toLowerCase()); (n._navigator && n._navigator.standalone && !r || n._navigator && !n._navigator.standalone && !r) && (n.usingWebAudio = !1) } n.usingWebAudio && (n.masterGain = void 0 === n.ctx.createGain ? n.ctx.createGainNode() : n.ctx.createGain(), n.masterGain.gain.setValueAtTime(n._muted ? 0 : n._volume, n.ctx.currentTime), n.masterGain.connect(n.ctx.destination)), n._setup() } }; "function" == typeof define && define.amd && define([], function () { return { Howler: n, Howl: o } }), "undefined" != typeof exports && (exports.Howler = n, exports.Howl = o), "undefined" != typeof window ? (window.HowlerGlobal = e, window.Howler = n, window.Howl = o, window.Sound = t) : "undefined" != typeof global && (global.HowlerGlobal = e, global.Howler = n, global.Howl = o, global.Sound = t) }();
		/*! Spatial Plugin */
		!function () { "use strict"; HowlerGlobal.prototype._pos = [0, 0, 0], HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0], HowlerGlobal.prototype.stereo = function (e) { var n = this; if (!n.ctx || !n.ctx.listener) return n; for (var t = n._howls.length - 1; t >= 0; t--)n._howls[t].stereo(e); return n }, HowlerGlobal.prototype.pos = function (e, n, t) { var r = this; return r.ctx && r.ctx.listener ? (n = "number" != typeof n ? r._pos[1] : n, t = "number" != typeof t ? r._pos[2] : t, "number" != typeof e ? r._pos : (r._pos = [e, n, t], void 0 !== r.ctx.listener.positionX ? (r.ctx.listener.positionX.setTargetAtTime(r._pos[0], Howler.ctx.currentTime, .1), r.ctx.listener.positionY.setTargetAtTime(r._pos[1], Howler.ctx.currentTime, .1), r.ctx.listener.positionZ.setTargetAtTime(r._pos[2], Howler.ctx.currentTime, .1)) : r.ctx.listener.setPosition(r._pos[0], r._pos[1], r._pos[2]), r)) : r }, HowlerGlobal.prototype.orientation = function (e, n, t, r, o, i) { var a = this; if (!a.ctx || !a.ctx.listener) return a; var s = a._orientation; return n = "number" != typeof n ? s[1] : n, t = "number" != typeof t ? s[2] : t, r = "number" != typeof r ? s[3] : r, o = "number" != typeof o ? s[4] : o, i = "number" != typeof i ? s[5] : i, "number" != typeof e ? s : (a._orientation = [e, n, t, r, o, i], void 0 !== a.ctx.listener.forwardX ? (a.ctx.listener.forwardX.setTargetAtTime(e, Howler.ctx.currentTime, .1), a.ctx.listener.forwardY.setTargetAtTime(n, Howler.ctx.currentTime, .1), a.ctx.listener.forwardZ.setTargetAtTime(t, Howler.ctx.currentTime, .1), a.ctx.listener.upX.setTargetAtTime(r, Howler.ctx.currentTime, .1), a.ctx.listener.upY.setTargetAtTime(o, Howler.ctx.currentTime, .1), a.ctx.listener.upZ.setTargetAtTime(i, Howler.ctx.currentTime, .1)) : a.ctx.listener.setOrientation(e, n, t, r, o, i), a) }, Howl.prototype.init = function (e) { return function (n) { var t = this; return t._orientation = n.orientation || [1, 0, 0], t._stereo = n.stereo || null, t._pos = n.pos || null, t._pannerAttr = { coneInnerAngle: void 0 !== n.coneInnerAngle ? n.coneInnerAngle : 360, coneOuterAngle: void 0 !== n.coneOuterAngle ? n.coneOuterAngle : 360, coneOuterGain: void 0 !== n.coneOuterGain ? n.coneOuterGain : 0, distanceModel: void 0 !== n.distanceModel ? n.distanceModel : "inverse", maxDistance: void 0 !== n.maxDistance ? n.maxDistance : 1e4, panningModel: void 0 !== n.panningModel ? n.panningModel : "HRTF", refDistance: void 0 !== n.refDistance ? n.refDistance : 1, rolloffFactor: void 0 !== n.rolloffFactor ? n.rolloffFactor : 1 }, t._onstereo = n.onstereo ? [{ fn: n.onstereo }] : [], t._onpos = n.onpos ? [{ fn: n.onpos }] : [], t._onorientation = n.onorientation ? [{ fn: n.onorientation }] : [], e.call(this, n) } }(Howl.prototype.init), Howl.prototype.stereo = function (n, t) { var r = this; if (!r._webAudio) return r; if ("loaded" !== r._state) return r._queue.push({ event: "stereo", action: function () { r.stereo(n, t) } }), r; var o = void 0 === Howler.ctx.createStereoPanner ? "spatial" : "stereo"; if (void 0 === t) { if ("number" != typeof n) return r._stereo; r._stereo = n, r._pos = [n, 0, 0] } for (var i = r._getSoundIds(t), a = 0; a < i.length; a++) { var s = r._soundById(i[a]); if (s) { if ("number" != typeof n) return s._stereo; s._stereo = n, s._pos = [n, 0, 0], s._node && (s._pannerAttr.panningModel = "equalpower", s._panner && s._panner.pan || e(s, o), "spatial" === o ? void 0 !== s._panner.positionX ? (s._panner.positionX.setValueAtTime(n, Howler.ctx.currentTime), s._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime), s._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime)) : s._panner.setPosition(n, 0, 0) : s._panner.pan.setValueAtTime(n, Howler.ctx.currentTime)), r._emit("stereo", s._id) } } return r }, Howl.prototype.pos = function (n, t, r, o) { var i = this; if (!i._webAudio) return i; if ("loaded" !== i._state) return i._queue.push({ event: "pos", action: function () { i.pos(n, t, r, o) } }), i; if (t = "number" != typeof t ? 0 : t, r = "number" != typeof r ? -.5 : r, void 0 === o) { if ("number" != typeof n) return i._pos; i._pos = [n, t, r] } for (var a = i._getSoundIds(o), s = 0; s < a.length; s++) { var p = i._soundById(a[s]); if (p) { if ("number" != typeof n) return p._pos; p._pos = [n, t, r], p._node && (p._panner && !p._panner.pan || e(p, "spatial"), void 0 !== p._panner.positionX ? (p._panner.positionX.setValueAtTime(n, Howler.ctx.currentTime), p._panner.positionY.setValueAtTime(t, Howler.ctx.currentTime), p._panner.positionZ.setValueAtTime(r, Howler.ctx.currentTime)) : p._panner.setPosition(n, t, r)), i._emit("pos", p._id) } } return i }, Howl.prototype.orientation = function (n, t, r, o) { var i = this; if (!i._webAudio) return i; if ("loaded" !== i._state) return i._queue.push({ event: "orientation", action: function () { i.orientation(n, t, r, o) } }), i; if (t = "number" != typeof t ? i._orientation[1] : t, r = "number" != typeof r ? i._orientation[2] : r, void 0 === o) { if ("number" != typeof n) return i._orientation; i._orientation = [n, t, r] } for (var a = i._getSoundIds(o), s = 0; s < a.length; s++) { var p = i._soundById(a[s]); if (p) { if ("number" != typeof n) return p._orientation; p._orientation = [n, t, r], p._node && (p._panner || (p._pos || (p._pos = i._pos || [0, 0, -.5]), e(p, "spatial")), void 0 !== p._panner.orientationX ? (p._panner.orientationX.setValueAtTime(n, Howler.ctx.currentTime), p._panner.orientationY.setValueAtTime(t, Howler.ctx.currentTime), p._panner.orientationZ.setValueAtTime(r, Howler.ctx.currentTime)) : p._panner.setOrientation(n, t, r)), i._emit("orientation", p._id) } } return i }, Howl.prototype.pannerAttr = function () { var n, t, r, o = this, i = arguments; if (!o._webAudio) return o; if (0 === i.length) return o._pannerAttr; if (1 === i.length) { if ("object" != typeof i[0]) return r = o._soundById(parseInt(i[0], 10)), r ? r._pannerAttr : o._pannerAttr; n = i[0], void 0 === t && (n.pannerAttr || (n.pannerAttr = { coneInnerAngle: n.coneInnerAngle, coneOuterAngle: n.coneOuterAngle, coneOuterGain: n.coneOuterGain, distanceModel: n.distanceModel, maxDistance: n.maxDistance, refDistance: n.refDistance, rolloffFactor: n.rolloffFactor, panningModel: n.panningModel }), o._pannerAttr = { coneInnerAngle: void 0 !== n.pannerAttr.coneInnerAngle ? n.pannerAttr.coneInnerAngle : o._coneInnerAngle, coneOuterAngle: void 0 !== n.pannerAttr.coneOuterAngle ? n.pannerAttr.coneOuterAngle : o._coneOuterAngle, coneOuterGain: void 0 !== n.pannerAttr.coneOuterGain ? n.pannerAttr.coneOuterGain : o._coneOuterGain, distanceModel: void 0 !== n.pannerAttr.distanceModel ? n.pannerAttr.distanceModel : o._distanceModel, maxDistance: void 0 !== n.pannerAttr.maxDistance ? n.pannerAttr.maxDistance : o._maxDistance, refDistance: void 0 !== n.pannerAttr.refDistance ? n.pannerAttr.refDistance : o._refDistance, rolloffFactor: void 0 !== n.pannerAttr.rolloffFactor ? n.pannerAttr.rolloffFactor : o._rolloffFactor, panningModel: void 0 !== n.pannerAttr.panningModel ? n.pannerAttr.panningModel : o._panningModel }) } else 2 === i.length && (n = i[0], t = parseInt(i[1], 10)); for (var a = o._getSoundIds(t), s = 0; s < a.length; s++)if (r = o._soundById(a[s])) { var p = r._pannerAttr; p = { coneInnerAngle: void 0 !== n.coneInnerAngle ? n.coneInnerAngle : p.coneInnerAngle, coneOuterAngle: void 0 !== n.coneOuterAngle ? n.coneOuterAngle : p.coneOuterAngle, coneOuterGain: void 0 !== n.coneOuterGain ? n.coneOuterGain : p.coneOuterGain, distanceModel: void 0 !== n.distanceModel ? n.distanceModel : p.distanceModel, maxDistance: void 0 !== n.maxDistance ? n.maxDistance : p.maxDistance, refDistance: void 0 !== n.refDistance ? n.refDistance : p.refDistance, rolloffFactor: void 0 !== n.rolloffFactor ? n.rolloffFactor : p.rolloffFactor, panningModel: void 0 !== n.panningModel ? n.panningModel : p.panningModel }; var c = r._panner; c ? (c.coneInnerAngle = p.coneInnerAngle, c.coneOuterAngle = p.coneOuterAngle, c.coneOuterGain = p.coneOuterGain, c.distanceModel = p.distanceModel, c.maxDistance = p.maxDistance, c.refDistance = p.refDistance, c.rolloffFactor = p.rolloffFactor, c.panningModel = p.panningModel) : (r._pos || (r._pos = o._pos || [0, 0, -.5]), e(r, "spatial")) } return o }, Sound.prototype.init = function (e) { return function () { var n = this, t = n._parent; n._orientation = t._orientation, n._stereo = t._stereo, n._pos = t._pos, n._pannerAttr = t._pannerAttr, e.call(this), n._stereo ? t.stereo(n._stereo) : n._pos && t.pos(n._pos[0], n._pos[1], n._pos[2], n._id) } }(Sound.prototype.init), Sound.prototype.reset = function (e) { return function () { var n = this, t = n._parent; return n._orientation = t._orientation, n._stereo = t._stereo, n._pos = t._pos, n._pannerAttr = t._pannerAttr, n._stereo ? t.stereo(n._stereo) : n._pos ? t.pos(n._pos[0], n._pos[1], n._pos[2], n._id) : n._panner && (n._panner.disconnect(0), n._panner = void 0, t._refreshBuffer(n)), e.call(this) } }(Sound.prototype.reset); var e = function (e, n) { n = n || "spatial", "spatial" === n ? (e._panner = Howler.ctx.createPanner(), e._panner.coneInnerAngle = e._pannerAttr.coneInnerAngle, e._panner.coneOuterAngle = e._pannerAttr.coneOuterAngle, e._panner.coneOuterGain = e._pannerAttr.coneOuterGain, e._panner.distanceModel = e._pannerAttr.distanceModel, e._panner.maxDistance = e._pannerAttr.maxDistance, e._panner.refDistance = e._pannerAttr.refDistance, e._panner.rolloffFactor = e._pannerAttr.rolloffFactor, e._panner.panningModel = e._pannerAttr.panningModel, void 0 !== e._panner.positionX ? (e._panner.positionX.setValueAtTime(e._pos[0], Howler.ctx.currentTime), e._panner.positionY.setValueAtTime(e._pos[1], Howler.ctx.currentTime), e._panner.positionZ.setValueAtTime(e._pos[2], Howler.ctx.currentTime)) : e._panner.setPosition(e._pos[0], e._pos[1], e._pos[2]), void 0 !== e._panner.orientationX ? (e._panner.orientationX.setValueAtTime(e._orientation[0], Howler.ctx.currentTime), e._panner.orientationY.setValueAtTime(e._orientation[1], Howler.ctx.currentTime), e._panner.orientationZ.setValueAtTime(e._orientation[2], Howler.ctx.currentTime)) : e._panner.setOrientation(e._orientation[0], e._orientation[1], e._orientation[2])) : (e._panner = Howler.ctx.createStereoPanner(), e._panner.pan.setValueAtTime(e._stereo, Howler.ctx.currentTime)), e._panner.connect(e._node), e._paused || e._parent.pause(e._id, !0).play(e._id, !0) } }();</script>
</body>

</html>

<!--
	Copyright (C) 2022 M.Katsube <katsubemakito@gmail.com>
https://blog.katsubemakito.net/html5/audio-howlerjs2
This software is released under the GNU General Public License version 3.
http://www.gnu.org/licenses/
-->
